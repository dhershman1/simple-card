!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.simpleCard={})}(this,function(r){"use strict";var c=function(r){return"string"==typeof r||"number"==typeof r},u=function(r){if(!c(r))throw new TypeError("cvn should be a string or number type");var e,t=String(r).replace(/\D/g,""),n=3===(e=t.length)?"norm":4===e&&"amex";return n?{isValid:!0,cvnType:n}:{isValid:!1,cvnType:"Invalid CVN Code"}},l=function(r){if("string"!=typeof r)throw new TypeError("date should be a string type");var e,t,n,o=(e=new Date,new Date("".concat(e.getMonth()+1,"/1/").concat(e.getFullYear()))),a=new Date((n=r.replace(/\s/g,"").split(/\W/g),"".concat(n[0],"/1/").concat(2===(t=n[1]).length?"20".concat(t):t))),i=!!isNaN(a)||a<o;return{isValid:!i,isExpired:i}};function n(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=[],n=!0,o=!1,a=void 0;try{for(var i,c=r[Symbol.iterator]();!(n=(i=c.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){o=!0,a=r}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return t}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(r){return function(r){if(Array.isArray(r)){for(var e=0,t=new Array(r.length);e<r.length;e++)t[e]=r[e];return t}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(r,e){for(var t=[],n=r;n<e;n++)t.push(n);return t},f=function(e){var r={amex:[34,37],discover:[6011].concat(o(a(622126,622925)),o(a(644,649)),[65]),master:a(50,55),visa:[4]};for(var t in r){if(n(r[t].filter(function(r){return new RegExp("^".concat(r)).test(e)}),1)[0])return t}},s=function(r,e){if(!c(r)||!c(e))throw new TypeError("cvn and card number should be string or number types");var t,n,o,a,i=(t=String(r).replace(/\W/g,""),n=f(String(e).replace(/\W/g,"")),o=n,(4!==t.length||"amex"===o)&&(a=n,3!==t.length||"amex"!==a));return{isValid:i,match:i?"card type matches cvn":"cvn does not match card type"}},d=function(r){if(!c(r))throw new TypeError("number should be a string or number type");var e=String(r).replace(/\W/g,""),t=Boolean(function(r){for(var e=[0,2,4,6,8,1,3,5,7,9],t=r.length,n=1,o=0,a=0;t;)a=parseInt(r.charAt(--t),10),o+=(n^=1)?e[a]:a;return o&&o%10==0}(e));return{isValid:t,cardType:t?f(e):"Invalid Card Number"}};r.cvn=u,r.expired=l,r.matches=s,r.number=d,r.validate=function(r){if("[object Object]"!==Object.prototype.toString.call(r))throw new TypeError("Must send full card object to run full validation");return t=(e=r).number,n=e.cvn,o=e.date,a=[d(t),u(n),l(o),s(n,t)],i=0,(c=a.reduce(function(r,e){var t=Object.keys(e),n=t[t.length-1];return e.isValid||i++,r[n]=e[n],r},{})).isValid=0===i,c;var e,t,n,o,a,i,c},Object.defineProperty(r,"__esModule",{value:!0})});
