!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.simpleCard={})}(this,function(r){"use strict";var e=function(r){return"string"==typeof r||"number"==typeof r},t=function(r){if(!e(r))throw new TypeError("cvn should be a string or number type");var t,n=String(r).replace(/\D/g,""),o=3===(t=n.length)?"norm":4===t&&"amex";return o?{isValid:!0,cvnType:o}:{isValid:!1,cvnType:"Invalid CVN Code"}},n=function(r){if("string"!=typeof r)throw new TypeError("date should be a string type");var e,t=(e=new Date,new Date("".concat(e.getMonth()+1,"/1/").concat(e.getFullYear()))),n=new Date(function(r){var e,t=r.replace(/\s/g,"").split(/\W/g);return"".concat(t[0],"/1/").concat(2===(e=t[1]).length?"20".concat(e):e)}(r)),o=!!isNaN(n)||t>n;return{isValid:!o,isExpired:o}};function o(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,c=r[Symbol.iterator]();!(n=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(r){o=!0,i=r}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return t}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(r){return function(r){if(Array.isArray(r)){for(var e=0,t=new Array(r.length);e<r.length;e++)t[e]=r[e];return t}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(r,e){for(var t=[],n=r;n<e;n++)t.push(n);return t},c=function(r){var e={amex:[34,37],discover:[6011].concat(i(a(622126,622925)),i(a(644,649)),[65]),master:a(50,55),visa:[4]};for(var t in e){if(o(e[t].filter(function(e){return new RegExp("^".concat(e)).test(r)}),1)[0])return t}return!1},u=function(r,t){if(!e(r)||!e(t))throw new TypeError("cvn and card number should be string or number types");var n=function(r,e){return!function(r,e){return 4===r.length&&"amex"!==e}(r,e)&&!function(r,e){return 3===r.length&&"amex"===e}(r,e)}(String(r).replace(/\W/g,""),c(String(t).replace(/\W/g,"")));return{isValid:n,match:n?"card type matches cvn":"cvn does not match card type"}},l=function(r){if(!e(r))throw new TypeError("number should be a string or number type");var t=String(r).replace(/\W/g,""),n=Boolean(function(r){for(var e=[0,2,4,6,8,1,3,5,7,9],t=r.length,n=1,o=0,i=0;t;)i=parseInt(r.charAt(--t),10),o+=(n^=1)?e[i]:i;return o&&o%10==0}(t));return{isValid:n,cardType:n?c(t):"Invalid Card Number"}};r.cvn=t,r.expired=n,r.matches=u,r.number=l,r.validate=function(r){if("[object Object]"!==Object.prototype.toString.call(r))throw new TypeError("Must send full card object to run full validation");return o=(e=r).number,i=e.cvn,a=e.date,c=0,(f=[l(o),t(i),n(a),u(i,o)].reduce(function(r,e){var t=Object.keys(e),n=t[t.length-1];return e.isValid||c++,r[n]=e[n],r},{})).isValid=0===c,f;var e,o,i,a,c,f},Object.defineProperty(r,"__esModule",{value:!0})});
